{% extends "base.html" %}
{% block content %}

<div id="page"  class="postPage">
  <!-- 
<div class="subnav">  
  <div class="row">
    <div class="large-12 columns">
      <div class="rank-types">
	<a>Story</a>
      </div>
    </div>
  </div>
</div>
   -->
  <div class="row fullWidth">

    <div class="large-3 columns sidebar">
      <!-- 
	   <ul class="breadcrumbs">
	     <li><a href="#">Harry Potter and the Methods of Rationality</a></li>
	     <li class="current"><a href="#">Comparing Reality To Its Alternatives</a></li>
	   </ul> -->
      <ul class="side-nav">      
	<li><a class="nav-story-title" href="/story/{{story.slug}}/edit">{{story.title}}</a></li>
	<hr/>
	<a class="button small" href="/story/{{story.slug}}/add">Add Chapter</a>
      </ul>
      <ul class="side-nav chapters">
	{% for chapter in story.chapters.all %}
	<div class="chapter-title">
	  <li>
	    <a href="/story/{{story.slug}}/{{chapter.slug}}/edit">{{chapter.number}} : {{chapter.title}}</a>
	  </li>
	</div>
	<div class="chapter-arrows">
	    <a href="/story/{{story.slug}}/{{chapter.slug}}/down" class="chapter-button chapter-arrow">&#9650;</a>
	    <a href="/story/{{story.slug}}/{{chapter.slug}}/up" class="chapter-button chapter-arrow">&#9660;</a>
	</div>
      <div class="clearfix"></div>	
	{% endfor %}
      </ul>
      <!-- <span class="fi-list large" style="float:right;"></span>         -->
      <div class="clearfix"></div>
      <div style="width:100%; height: 20px"></div>
    </div>

    
    <div class="large-9 columns">
      <br/>
      <!-- 
      <div class="panel">
      <a>Harry Potter and The Methods of Rationality</a> >
      <span>Comparing Reality To Its Alternatives</span>
      </div>
      -->

      <!-- Submit Form -->
      {% if action = "story_edit" %}
      <form action="/story/{{story.slug}}/edit" method="post">
      {% elif action = "chapter_create" %}
      <form action="/story/{{story.slug}}/add" method="post">	
      {% elif action = "chapter_edit" %}
      <form action="/story/{{story.slug}}/{{chapter.slug}}/edit" method="post">
      {% endif %}	
      {% csrf_token %}
	{{form.title}}
	<div class="editor">
	  {% if action = "story_edit" %}
	  {{form.description}}
          {% else %}
	  {{form.body}}
          {% endif %}	
	</div>
	<br/>	

	<!-- Delete Story -->

      {% if action = "story_edit" %}
	<a href="#" data-reveal-id="deleteStory" class="button small delete-chapter">Delete Story</a>
      {% elif action = "chapter_edit" %}
	<a href="#" data-reveal-id="deleteChapter" class="button small delete-chapter">Delete Chapter</a>
      {% endif %}	

	<div id="deleteStory" class="reveal-modal"
	     data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
	  <h2 id="modalTitle"> Confirm </h2>
	  <p class="lead">Are you sure you want to delete this story?</p>
	  <!-- Button -->
	  <a href="/story/{{story.slug}}/delete" class="button small confirm-delete">Delete</a>      	
	  <a class="close-reveal-modal" aria-label="Close">&#215;</a>
	</div>

	<div id="deleteChapter" class="reveal-modal"
	     data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
	  <h2 id="modalTitle"> Confirm </h2>
	  <p class="lead">Are you sure you want to delete this chapter?</p>
	  <!-- Button -->
      <a href="/story/{{story.slug}}/{{chapter.slug}}/delete" class="button small confirm-delete">Delete</a>  
	  <a class="close-reveal-modal" aria-label="Close">&#215;</a>
	</div>	
	
 	<div class="edit-buttons">
	  <!-- <button class="button small" type="submit">Save Draft</button> -->
	  <br/>
	  <div class="set-hubs">
	    {{form.hubs}}
	  </div>
	  
	  {% if action = "story_edit" %}	  
	  <a href="/story/{{story.slug}}" class="button small view">View</a>
	    {% if not story.published %}	  
	    <a href="/story/{{story.slug}}/publish" class="button small">Publish</a>
	    {% else %}
	    <a href="/story/{{story.slug}}/unpublish" class="button small view">Unpublish</a>
	    {% endif %}	    
	  {% elif action = "chapter_edit" %}
	  <a href="/story/{{story.slug}}/{{chapter.slug}}" class="button small view" type="submit">View</a>	  
	  {% endif %}		  
	  <button class="button small" type="submit">Save</button>
	</div>
	<div class="clearfix"></div>
	<div style="width:100%; height: 20px"></div>
      </form>
      <!-- End Submit Form -->
    </div>


</div>	 <!-- End row -->



  <link rel="stylesheet" href="//cdn.jsdelivr.net/editor/0.1.0/editor.css">
  <script src="//cdn.jsdelivr.net/editor/0.1.0/editor.js"></script>
  <script src="//cdn.jsdelivr.net/editor/0.1.0/marked.js"></script>

<!-- Select2 -->
<link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/css/select2.css" rel="stylesheet" />
<script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/select2.min.js"></script>
  

<script>
  $(document).ready(function(){
  var isMobile = false;
  if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {isMobile = true;}

  //Editor
  if(!isMobile){
  var editor = new Editor();
  editor.render();
  }

  $("#id_hubs").select2({
  placeholder: "Select hubs",
  allowClear: true,
  maximumSelectionLength: 4  
  
})

  })
</script>

<style>
.set-hubs {
    width: calc(100% - 120px);
    width: 200px;
float:left;
    margin-right: 420px;    
}


<!-- Container -->
.select2-container--default
.select2-selection--multiple, {
  border-color: #cccccc;
}

.select2-container--default.select2-container--focus .select2-selection--multiple {
  border-color: #cccccc;
}


.select2-container--default .select2-selection--multiple {
    height: 50px;
}

.set-hubs input {
margin-top: -7px!important;
}

.select2-container--default .select2-selection--multiple .select2-selection__clear {
  margin-top: 10px;
}

#id_hubs {
    list-style-type: none;
width:600px;
padding: 0px;
}

#id_hubs {
    list-style-type: none;
width:600px;
padding: 0px;
}

@media screen and (max-width: 1300px) {
#id_hubs {
width: 400px;
}
}

.edit-buttons{
float:right;
}

@media screen and (max-width: 1300px) {
.edit-buttons{
float:left;
}
}




<!-- Tags -->
.select2-container--default .select2-selection--multiple .select2-selection__choice {
  background-color: #e4e4e4;
  border: none!important;
border-radius: 0px;
}

.select2-container--default .select2-selection--multiple .select2-selection__choice {
  border-radius: 0px;
  border: none;
}
  
</style>
{% endblock content %}

